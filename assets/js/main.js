console.log("This site was generated by Hugo.");

const toast = (msg, timeout) => {
  let toast = document.createElement("div");

  toast.classList.add("toast");
  toast.classList.add("fade");
  toast.innerText = msg;

  $(document).find("body").append(toast);
  setTimeout(() => {
    $(toast).remove();
    toast.classList.add("hidden");
    console.log("remove toast");
  }, timeout);

  toast.classList.add("show");
};

const selectAll = (el) => {
  let dom = el.currentTarget;
  let text = dom.textContent;

  let range = document.createRange();
  let sel = window.getSelection();

  range.selectNodeContents(dom);
  sel.removeAllRanges();
  sel.addRange(range);

  navigator.clipboard.writeText(text).then(
    () => {
      console.log("copied");
      // pop a toasts
      toast("Copied to clipboard", 1800);
    },
    (err) => {
      console.log(err);
    },
  );
};

$(window).on("load", () => {
  $("code").on("dblclick", selectAll);
});
